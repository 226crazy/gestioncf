<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rapports - Gestion Salle de Jeux</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">üéÆ Salle de Jeux</div>
        <div class="nav-links">
            <a href="dashboard.html">Tableau de Bord</a>
            <a href="sessions.html">Nouvelle Session</a>
            <a href="reports.html" class="active">Rapports</a>
            <a href="expenses.html">D√©penses</a>
            <a href="settings.html">Param√®tres</a>
            <a href="#" id="logoutBtn">D√©connexion</a>
        </div>
        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>Rapports et Statistiques</h1>
        </div>

        <!-- Date Filter -->
        <div class="filter-section">
            <div class="form-row">
                <div class="form-group">
                    <label for="startDate">Date de D√©but</label>
                    <input type="date" id="startDate">
                </div>
                <div class="form-group">
                    <label for="endDate">Date de Fin</label>
                    <input type="date" id="endDate">
                </div>
                <button id="filterBtn" class="btn-primary">Filtrer</button>
                <button id="exportBtn" class="btn-secondary">üìä Exporter vers Sheets</button>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Recettes Totales</h3>
                <p class="stat-value" id="totalRevenue">0 F</p>
            </div>
            <div class="stat-card">
                <h3>D√©penses Totales</h3>
                <p class="stat-value" id="totalExpenses">0 F</p>
            </div>
            <div class="stat-card">
                <h3>B√©n√©fice Net</h3>
                <p class="stat-value" id="netProfit">0 F</p>
            </div>
            <div class="stat-card">
                <h3>Nombre de Sessions</h3>
                <p class="stat-value" id="totalSessions">0</p>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-grid">
            <div class="chart-container">
                <h2>Recettes par Jour</h2>
                <canvas id="revenueChart"></canvas>
            </div>
            <div class="chart-container">
                <h2>Consoles les Plus Utilis√©es</h2>
                <canvas id="consoleChart"></canvas>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <h2>Heures de Pointe</h2>
                <canvas id="peakHoursChart"></canvas>
            </div>
            <div class="chart-container">
                <h2>Modes de Paiement</h2>
                <canvas id="paymentChart"></canvas>
            </div>
        </div>

        <!-- Detailed Tables -->
        <div class="section">
            <h2>D√©tails des Sessions</h2>
            <div class="table-responsive">
                <table id="sessionsTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Client</th>
                            <th>Console</th>
                            <th>Dur√©e</th>
                            <th>Montant</th>
                            <th>Paiement</th>
                            <th>Statut</th>
                        </tr>
                    </thead>
                    <tbody id="sessionsTableBody">
                        <tr>
                            <td colspan="7" class="empty-message">Aucune donn√©e disponible</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <h2>Consommation √âlectrique</h2>
            <div class="table-responsive">
                <table id="electricityTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Compteur</th>
                            <th>Consommation</th>
                            <th>Co√ªt</th>
                        </tr>
                    </thead>
                    <tbody id="electricityTableBody">
                        <tr>
                            <td colspan="4" class="empty-message">Aucune donn√©e disponible</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="js/config.js"></script>
    <script src="js/auth-check.js"></script>
    <script src="js/reports.js"></script>
</body>
</html>
